using System;
using System.Collections.Generic;
using System.Linq;

class Program
{
    static int ComputePoints(decimal spent, string coupon)
    {
        int points = (int)Math.Floor(spent) * 5;
        coupon = coupon.ToUpper();
        if (coupon == "NEW50" || coupon == "VIP50")
            points += 50;
        return points;
    }

    static void Main()
    {
        Console.Write("Enter number of lines: ");
        int n = int.Parse(Console.ReadLine());

        List<(string id, int points)> list = new List<(string, int)>();

        for (int i = 0; i < n; i++)
        {
            Console.Write($"Line {i + 1}: ");
            string[] parts = Console.ReadLine().Split(',');

            if (parts.Length < 2)
            {
                Console.WriteLine("Invalid line");
                continue;
            }

            string id = parts[0].Trim();
            decimal spent;
            if (!decimal.TryParse(parts[1], out spent) || spent < 0)
            {
                Console.WriteLine("Invalid amount");
                continue;
            }

            string coupon = parts.Length > 2 ? parts[2].Trim() : "";

            list.Add((id, ComputePoints(spent, coupon)));
        }

        var top = list.OrderByDescending(x => x.points).ThenBy(x => x.id).Take(3);

        Console.WriteLine("\nTop Customers:");
        foreach (var c in top)
            Console.WriteLine($"{c.id} - {c.points} pts");
    }
}
